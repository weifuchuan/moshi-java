(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{1017:function(e,t,r){"use strict";r.d(t,"b",function(){return v}),r.d(t,"a",function(){return g});var n=r(207),a=r.n(n),i=r(39),c=r.n(i),o=r(1),u=r.n(o),s=(r(811),r(34),r(5)),l=r.n(s),p=r(4),f=r.n(p),m=(r(1018),r(861)),d=r.n(m),b=r(6);r(1042),r(1043);const y=r(1044).default,h=r(1048).default;function v(e){return f.a.createElement(d.a,a()({ref:e.editorRef,media:{uploadFn:function(){var e=l()(u.a.mark(function e(t){var r,n,a,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(b.f)([t.file]),n=r.response,r.progress.subscribe(e=>{t.progress(e)}),e.prev=2,e.next=5,n;case 5:a=e.sent,(i=a.data[t.file.name])?t.success({url:`${i}`,meta:{id:t.file.name,title:t.file.name,alt:t.file.name,loop:!1,autoPlay:!1,controls:!0,poster:""}}):t.error({msg:"上传失败"}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),t.error({msg:e.t0.toString()});case 13:case"end":return e.stop()}},e,null,[[2,10]])}));return function(t){return e.apply(this,arguments)}}(),validateFn:e=>!0}},e,{style:c()({border:"1px solid #d9d9d9",borderRadius:"4px"},e.style||{})}))}d.a.use(h({})),d.a.use(y({}));class g extends p.Component{render(){return f.a.createElement(d.a,a()({media:{uploadFn:function(){var e=l()(u.a.mark(function e(t){var r,n,a,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(b.f)([t.file]),n=r.response,r.progress.subscribe(e=>{t.progress(e)}),e.prev=2,e.next=5,n;case 5:a=e.sent,(i=a.data[t.file.name])?t.success({url:`${i}`,meta:{id:t.file.name,title:t.file.name,alt:t.file.name,loop:!1,autoPlay:!1,controls:!0,poster:""}}):t.error({msg:"上传失败"}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),t.error({msg:e.t0.toString()});case 13:case"end":return e.stop()}},e,null,[[2,10]])}));return function(t){return e.apply(this,arguments)}}(),validateFn:e=>!0}},this.props,{style:c()({border:"1px solid #d9d9d9",borderRadius:"4px"},this.props.style||{})}))}}},1018:function(e,t,r){},1228:function(e,t,r){},1274:function(e,t,r){"use strict";r.r(t);r(645);var n=r(643),a=(r(323),r(112)),i=(r(818),r(821)),c=r(1),o=r.n(c),u=r(39),s=r.n(u),l=(r(34),r(5)),p=r.n(l),f=r(163),m=r.n(f),d=(r(889),r(853)),b=r(855),y=r(1017),h=r(890),v=r(6),g=r(452),w=r(234),O=r(77),E=r(861),x=r.n(E),j=(r(872),r(442)),S=r(4),T=r.n(S),k=r(14);r(1228);const C=d.a.Option;t.default=Object(j.b)(({})=>{Object(h.a)("课程申请 | 默识 - 作者端");const e=Object(S.useContext)(O.a),t=e.me,r=Object(S.useState)({accountId:t.id,buyerCount:0,name:"",courseType:w.a.TYPE.COLUMN,createAt:0,discountedPrice:0,id:0,introduce:"",shortIntro:"",introduceImage:"",note:"",offerTo:0,price:0,publishAt:0,status:w.a.STATUS.INIT,lectureCount:0}),c=m()(r,2),u=c[0],l=c[1],f=Object(S.useState)({id:0,accountId:t.id,category:0,title:`${t.nickName} 申请创建课程《${u.name}》`,content:"",createAt:0,status:g.a.STATUS.COMMIT}),E=m()(f,2),j=E[0],I=E[1],z=Object(S.useState)(x.a.createEditorState(null)),A=m()(z,2),M=A[0],$=A[1],N=Object(S.useState)(x.a.createEditorState(null)),R=m()(N,2),U=R[0],L=R[1],P=Object(S.useState)(!1),B=m()(P,2),F=B[0],_=B[1],H=Object(S.useState)(!1),Y=m()(H,2),D=Y[0],J=Y[1];return Object(S.useEffect)(()=>{p()(o.a.mark(function e(){var t,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.d)("/select","select `key`, `value` from preset_text_l where `key` = ? ","course/application/template");case 2:t=e.sent,r=t.find(e=>"course/application/template"===e.key).value,I(s()({},j,{content:r})),L(x.a.createEditorState(r));case 6:case"end":return e.stop()}},e)}))()},[]),T.a.createElement(b.a,{style:{flex:1,marginLeft:"0",overflowY:"auto",overflowX:"hidden"}},T.a.createElement("div",null,T.a.createElement(i.a,{value:u.name,onInput:e=>{l(s()({},u,{name:e.target.value})),I(s()({},j,{title:`${t.nickName} 申请创建课程《${e.target.value}》`}))},placeholder:"课程名称",style:{marginBottom:"1em"}}),T.a.createElement(d.a,{value:u.courseType,style:{width:"100%",marginBottom:"1em"},onChange:e=>{l(s()({},u,{courseType:e}))}},T.a.createElement(C,{value:1},"专栏课程"),T.a.createElement(C,{value:2},"视频课程")),T.a.createElement(y.b,{placeholder:"课程简介",value:M,onChange:e=>$(e),style:{marginBottom:"1em"}}),T.a.createElement(i.a,{value:j.title,onInput:e=>I(s()({},j,{title:e.target.value})),disabled:!0,style:{marginBottom:"1em"}}),T.a.createElement(y.b,{value:U,onChange:e=>L(e),style:{marginBottom:"1em"}}),T.a.createElement(n.a,{onClick:p()(o.a.mark(function t(){var r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return J(!1),u.introduce=M.toHTML(),j.content=U.toHTML(),t.prev=3,t.next=6,w.a.create(u.name,u.introduce,u.courseType,j.title,j.content);case 6:r=t.sent,a.a.success("提交成功"),_(!0),e.courses.push(w.a.from(r)),k.Control.go(`/course/detail/${r.id}`),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(3),a.a.error(t.t0);case 16:case"end":return t.stop()}},t,null,[[3,13]])})),loading:D,type:"primary",disabled:F},0===j.id?"提交":"提交修改")))})},452:function(e,t,r){"use strict";r.d(t,"a",function(){return T});var n,a,i,c,o,u,s,l,p,f,m,d,b,y=r(1),h=r.n(y),v=(r(34),r(5)),g=r.n(v),w=r(3),O=r.n(w),E=r(2),x=r.n(E),j=(r(59),r(6)),S=r(0);let T=(b=d=class e{constructor(){O()(this,"id",a,this),O()(this,"accountId",i,this),O()(this,"category",c,this),O()(this,"title",o,this),O()(this,"content",u,this),O()(this,"createAt",s,this),O()(this,"status",l,this),O()(this,"reply",p,this),O()(this,"refId",f,this),O()(this,"contentType",m,this)}static from(t){const r=new e;return Object(S.f)(()=>{Object.assign(r,t)}),r}static my(t){return g()(h.a.mark(function r(){var n;return h.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(j.b)("/apply/my",{category:t});case 2:return n=r.sent,r.abrupt("return",n.data.map(e.from));case 4:case"end":return r.stop()}},r)}))()}static commit(e,t,r,n){return g()(h.a.mark(function a(){var i;return h.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(j.b)("/apply/commit",{id:e,title:t,content:r,category:n});case 2:return i=a.sent,a.abrupt("return",i.data);case 4:case"end":return a.stop()}},a)}))()}static cancel(e){return g()(h.a.mark(function t(){var r;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(j.b)("/apply/cancel",{id:e});case 2:return r=t.sent,t.abrupt("return",r.data);case 4:case"end":return t.stop()}},t)}))()}},d.STATUS=Object.freeze({COMMIT:0,PASSED:1,FAIL:2}),d.CATEGORY=Object.freeze({TEACHER:0,COURSE_COLUMN:1,COURSE_VIDEO:2}),n=b,a=x()(n.prototype,"id",[S.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),i=x()(n.prototype,"accountId",[S.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),c=x()(n.prototype,"category",[S.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),o=x()(n.prototype,"title",[S.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),u=x()(n.prototype,"content",[S.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=x()(n.prototype,"createAt",[S.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),l=x()(n.prototype,"status",[S.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p=x()(n.prototype,"reply",[S.e],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=x()(n.prototype,"refId",[S.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=x()(n.prototype,"contentType",[S.e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"html"}}),n)},855:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r(4),a=r.n(n);r(856);function i({children:e,className:t,style:r,onClick:n}){return a.a.createElement("div",{className:`Panel ${t||""}`,style:r,onClick:n||(()=>null)},e)}},856:function(e,t,r){},890:function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r(4);function a(e){Object(n.useEffect)(()=>{document.title=e},[e])}}}]);