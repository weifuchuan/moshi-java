modified from t-io-websocket